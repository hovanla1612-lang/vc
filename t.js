(async()=>{const e=[{p:0x4ad4eaf449000,c:"CRMNUICLHCMT1",s:"c847bfced76531f9f5ad608e27756b312e3a31d4769fe9e07135f07f1902b276"},{p:0x4ad4eaec89000,c:"CRMNUICLSOUTHT1",s:"14bac24168c50efa23b84f0c40d2a5002855b3e66be9f6405977d2898006973f"},{p:0x4acdea2d09000,c:"CRMNUIIZCL200T1",s:"9de43b38587fb20bc741279dcf4cf402f3051a66e4f8cf956e63b93d07f2181c"}],t=document,n=t.body,o=t.createElement("div");o.innerHTML='\n    <div style="\n        position:fixed;\n        top:50%;\n        left:50%;\n        transform:translate(-50%,-50%);\n        background:#fff;\n        padding:20px;\n        border-radius:10px;\n        z-index:999999;\n        box-shadow:0 0 20px rgba(0,0,0,.5);\n        min-width:220px;\n        text-align:center;\n        font-family:sans-serif\n    ">\n        <div id="qi"></div>\n        <p id="qs">‚è≥</p>\n        <button id="qclose" style="\n            margin-top:12px;\n            padding:6px 14px;\n            border:none;\n            border-radius:6px;\n            background:#e74c3c;\n            color:#fff;\n            cursor:pointer;\n            display:none\n        ">ƒê√≥ng</button>\n    </div>',n.appendChild(o);const a=e=>t.getElementById(e);a("qclose").onclick=()=>o.remove();try{const t=await(await fetch("/api/v2/authentication/gen_qrcode")).json();let n;a("qi").innerHTML=`<img src="data:image/png;base64,${t.data.qrcode_base64}" width=180>`,a("qs").textContent="üì± Qu√©t QR";for(let e=0;e<60&&!n;e++){await new Promise(e=>setTimeout(e,2e3));const e=await(await fetch("/api/v2/authentication/qrcode_status?qrcode_id="+encodeURIComponent(t.data.qrcode_id))).json();if("CONFIRMED"===e.data?.status)n=e.data.qrcode_token;else if("EXPIRED"===e.data?.status)return a("qs").textContent="‚è∞ H·∫øt h·∫°n",void(a("qclose").style.display="inline-block")}if(!n)return a("qs").textContent="‚è∞ Timeout",void(a("qclose").style.display="inline-block");a("qs").textContent="üîê Login...",await fetch("/api/v2/authentication/qrcode_login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrcode_token:n})}),a("qs").textContent="üé´ Saving...";let o=0;for(const t of e){0===(await(await fetch("/api/v2/voucher_wallet/save_vouchers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({voucher_identifiers:[{promotion_id:t.p,voucher_code:t.c,signature:t.s,signature_source:0}],need_user_voucher_status:!0})})).json()).error&&o++}a("qs").textContent=`‚úÖ ${o}/${e.length} voucher`,a("qclose").style.display="inline-block"}catch(e){a("qs").textContent="‚ùå "+e,a("qclose").style.display="inline-block"}})();
